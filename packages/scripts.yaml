climate_away:
  sequence:
    - service: climate.turn_off
      entity_id:
        - climate.downstairs
        - climate.upstairs
        - climate.bathroom_floor

climate_windows_open:
  sequence:
    - service: climate.turn_off
      entity_id:
        - climate.downstairs
        - climate.upstairs
    - service: notify.slack
      data:
        message: "Turning HVAC off since windows were left open"

good_morning:
  alias: "Good Morning"
  icon: "mdi:brightness-5"
  sequence:
    - condition: state
      entity_id: alarm_control_panel.abode_alarm
      state: "disarmed"
    - service: scene.turn_on
      entity_id: scene.good_morning
    - service: script.turn_on
      entity_id: script.shades_up

good_night:
  alias: "Good Night"
  icon: "mdi:brightness-2"
  sequence:
    - condition: state
      entity_id: alarm_control_panel.abode_alarm
      state: "disarmed"
    - service: scene.turn_on
      entity_id: scene.lights_off
    - service: script.turn_on
      entity_id: script.shades_down

goodbye:
  alias: "Goodbye"
  sequence:
    - service: homeassistant.turn_off
      entity_id: group.lights
    - service: script.turn_on
      entity_id: script.shades_down
    - service: script.climate_away

welcome_home:
  alias: "Welcome Home"
  sequence:
    - service: script.turn_on
      entity_id: script.shades_up
    - service: climate.set_hvac_mode
      entity_id: climate.bathroom_floor
      data:
        hvac_mode: heat
    - condition: template
      value_template: '{{ state_attr("sun.sun", "elevation") < -4 }}'
    - service: homeassistant.turn_on
      entity_id:
        - light.kitchen_lights
        - switch.front_door_lights

movie_lights:
  alias: "Movie Time"
  icon: "mdi:grid-large"
  sequence:
    - condition: state
      entity_id: alarm_control_panel.abode_alarm
      state: "disarmed"
    - service: script.turn_on
      entity_id: script.shade5down
    - service: script.turn_on
      entity_id: script.shade4down
    - condition: template
      value_template: '{{ state_attr("sun.sun", "elevation") < 5 }}'
    - service: scene.turn_on
      entity_id: scene.mood_lights
    - condition: template
      value_template: '{{ state_attr("sun.sun", "elevation") < 0 }}'
    - service: script.turn_on
      entity_id: script.shade3down
    - service: script.turn_on
      entity_id: script.shade2down

shade1up:
  alias: "Shade 1 - Up"
  icon: "mdi:grid-large"
  sequence:
    - service: remote.send_command
      data:
        entity_id: remote.broadlink
        num_repeats: 3
        command: !secret shade1_up

shade1down:
  alias: "Shade 1 - Down"
  icon: "mdi:grid-large"
  sequence:
    - service: remote.send_command
      data:
        entity_id: remote.broadlink
        num_repeats: 3
        command: !secret shade1_down

shade2up:
  alias: "Shade 2 - Up"
  icon: "mdi:grid-large"
  sequence:
    - service: remote.send_command
      data:
        entity_id: remote.broadlink
        num_repeats: 3
        command: !secret shade2_up

shade2down:
  alias: "Shade 2 - Down"
  icon: "mdi:grid-large"
  sequence:
    - service: remote.send_command
      data:
        entity_id: remote.broadlink
        num_repeats: 3
        command: !secret shade2_down

shade3up:
  alias: "Shade 3 - Up"
  icon: "mdi:grid-large"
  sequence:
    - service: remote.send_command
      data:
        entity_id: remote.broadlink
        num_repeats: 3
        command: !secret shade3_up

shade3down:
  alias: "Shade 3 - Down"
  icon: "mdi:grid-large"
  sequence:
    - service: remote.send_command
      data:
        entity_id: remote.broadlink
        num_repeats: 3
        command: !secret shade3_down

shade4up:
  alias: "Shade 4 - Up"
  icon: "mdi:grid-large"
  sequence:
    - service: remote.send_command
      data:
        entity_id: remote.broadlink
        num_repeats: 3
        command: !secret shade4_up

shade4down:
  alias: "Shade 4 - Down"
  icon: "mdi:grid-large"
  sequence:
    - service: remote.send_command
      data:
        entity_id: remote.broadlink
        num_repeats: 3
        command: !secret shade4_down

shade5up:
  alias: "Shade 5 - Up"
  icon: "mdi:grid-large"
  sequence:
    - service: remote.send_command
      data:
        entity_id: remote.broadlink
        num_repeats: 3
        command: !secret shade5_up

shade5down:
  alias: "Shade 5 - Down"
  icon: "mdi:grid-large"
  sequence:
    - service: remote.send_command
      data:
        entity_id: remote.broadlink
        num_repeats: 3
        command: !secret shade5_down

shades_up:
  alias: "Shades Up"
  icon: "mdi:grid-large"
  sequence:
    - condition: state
      entity_id: alarm_control_panel.abode_alarm
      state: "disarmed"
    - service: script.turn_on
      entity_id: script.shade5up
    - delay: "00:00:01"
    - service: script.turn_on
      entity_id: script.shade4up
    - delay: "00:00:01"
    - service: script.turn_on
      entity_id: script.shade3up
    - delay: "00:00:01"
    - service: script.turn_on
      entity_id: script.shade2up
    - delay: "00:00:01"
    - service: script.turn_on
      entity_id: script.shade1up

shades_down:
  alias: "Shades Down"
  icon: "mdi:grid-large"
  sequence:
    - service: script.turn_on
      entity_id: script.shade5down
    - delay: "00:00:01"
    - service: script.turn_on
      entity_id: script.shade4down
    - delay: "00:00:01"
    - service: script.turn_on
      entity_id: script.shade3down
    - delay: "00:00:01"
    - service: script.turn_on
      entity_id: script.shade2down
    - delay: "00:00:01"
    - service: script.turn_on
      entity_id: script.shade1down
